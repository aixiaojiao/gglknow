# 更新日志

## [v1.1.2] - 2024-12-19

### 🐛 紧急修复
- ✅ 修复v1.1.1中导致收藏失败的模板字符串错误
- ✅ 修复HTML格式无法正确保存的问题
- ✅ 增强数据验证，防止空值导致的模板错误
- ✅ 改进用户信息和推文内容的默认值处理

### 🔧 技术改进
- 🛡️ 为所有模板变量添加默认值保护
- 📋 移除可能干扰运行的调试日志
- 🎯 优化HTML和Markdown生成的健壮性
- 🔍 改进空值和undefined的处理逻辑

---

## [v1.1.1] - 2024-12-19

### 🐛 重要修复
- ✅ 修复HTML保存格式中出现无关图片的bug
- ✅ 优化图片提取逻辑，排除用户头像、表情符号和界面图标
- ✅ 改进媒体文件检测，只有真正的推文图片才会被保存
- ✅ 修复无图片推文在HTML格式中仍显示媒体部分的问题

### 🔧 技术改进
- 🎯 使用更精确的图片选择器，避免误提取界面元素
- 🛡️ 增强媒体文件过滤机制，排除profile_images、emoji、icon等
- 📋 增加详细的调试日志，便于问题排查
- 🔍 改进媒体文件存在性检查逻辑

---

## [v1.1.0] - 2024-12-19

### 🎉 新增功能
- ✨ 新增调试工具页面，支持实时诊断和问题修复
- 📖 新增详细的使用帮助页面，包含常见问题解答
- 🔧 新增一键修复常见问题功能
- 📝 新增实时日志记录和导出功能
- 🧪 新增功能测试工具（下载、存储、路径验证）

### 🛠️ 改进优化
- 🔄 大幅改进设置保存和读取的错误处理机制
- 📁 增强路径验证和清理功能，支持更多路径格式
- 💬 优化错误提示信息，提供具体的解决步骤
- 🎨 改进用户界面，添加帮助和调试按钮
- 📊 改进文件下载逻辑，支持更准确的MIME类型
- 🔐 增强权限检查和状态显示

### 🐛 修复问题
- ✅ 修复保存路径设置失效的问题
- ✅ 修复收藏按钮提示"请先设置保存路径"的问题
- ✅ 修复设置无法保存或保存后丢失的问题
- ✅ 修复路径验证逻辑中的边界情况
- ✅ 修复媒体文件下载失败影响主功能的问题
- ✅ 修复文件名包含特殊字符导致下载失败的问题

### 🔧 技术改进
- 📦 重构后台脚本的错误处理逻辑
- 🎯 优化设置存储的异步处理
- 🛡️ 增强数据验证和错误边界处理
- 📋 改进日志记录和调试信息输出
- 🔍 增加详细的状态检查和诊断功能

### 📚 文档更新
- 📖 新增完整的使用帮助文档
- 🔧 新增调试工具使用说明
- ❓ 新增常见问题解答部分
- 📝 更新README文档结构

---

## [v1.0.0] - 2024-12-18

### 🎉 首次发布
- 🐦 支持在Twitter/X推文旁添加收藏按钮
- 📁 支持自定义本地保存路径
- 🎨 支持多种文件格式（JSON、HTML、Markdown）
- 🖼️ 支持自动下载推文中的媒体文件
- ⚡ 支持实时适配新发布的推文
- 🌙 完美适配Twitter的深色主题
- 📖 内置推文浏览器功能
- 🔍 支持搜索和筛选功能
- 🔒 完全本地化，保护用户隐私

### 🎯 核心功能
- 一键收藏推文到本地
- 完整保存推文信息（用户、内容、时间、互动数据）
- 批量媒体文件下载
- 本地推文浏览和管理

### 🛡️ 安全特性
- 所有数据仅保存在本地
- 不收集任何用户信息
- 不跟踪用户行为
- 开源透明代码

---

## 版本说明

### 版本号规则
采用语义化版本控制 (Semantic Versioning)：
- **主版本号**：不兼容的API修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正

### 图标说明
- 🎉 新增功能
- 🛠️ 改进优化  
- 🐛 修复问题
- 🔧 技术改进
- 📚 文档更新
- 🛡️ 安全更新
- ⚡ 性能优化
- 🎨 界面改进 